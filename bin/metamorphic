#!/usr/bin/env node

var _ = require("underscore"),
    jsdom = require("jsdom"),
    metamorphic = require("../lib/metamorphic")

jsdom.env(
  process.argv[2] || "https://46bit.com", // backup URL is for debugging, removal is TODO
  [],
  function (err, window) {
    var html = new metamorphic.HTML()
    var page_tree = html.read(window.document)

    var page_html = html.write(page_tree)
    console.log(page_html)

    var jade = new metamorphic.Jade()
    var page_jade = jade.write(page_tree)
    console.log(page_jade)
  }
)
